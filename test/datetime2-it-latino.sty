\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{datetime2-it-latino}[2015/05/10 v1.0]
\DeclareOption*{\PassOptionsToPackage{\CurrentOption}{datetime2}}
\ProcessOptions
\RequirePackage{datetime2}
\RequirePackage{itnumpar}
%\RequirePackage{ifxetex,ifluatex}
%\ifxetex
%\RequireDateTimeModule{latino-utf8}
%\else
%\ifluatex
%\RequireDateTimeModule{latino-utf8}
%\else
%\RequireDateTimeModule{latino-ascii}
%\fi
%\fi
%\def\CurrentTrackedDialect{italian}
%\RequireDateTimeModule{italian}
%\undef\CurrentTrackedDialect
\newcommand{\DTMlatinoMensisPridie}{Pridie\space}
\newcommand*\DTMitfulltextmonthyearsep{,\space}
\newcommand*{\DTMlatinoMensis}[1]{%
	\ifcase#1
	\or
	Ianuarius%
	\or
	Februarius%
	\or
	Martius%
	\or
	Aprilis%
	\or
	Maius%
	\or
	Iunius%
	\or
	Quintilis%
	\or
	Sextilis%
	\or
	Septemper%
	\or
	October%
	\or
	November%
	\or
	December%
	\fi
}
\newcommand*{\DTMlatinoMensisDurata}[1]{%
	\ifcase#1
	\or
	31%
	\or
	28%
	\or
	31%
	\or
	30%
	\or
	31%
	\or
	30%
	\or
	31%
	\or
	31%
	\or
	30%
	\or
	31%
	\or
	30%
	\or
	31%
	\fi
}
\newcommand*{\DTMlatinoNonae}[1]{%
	\ifcase#1
	\or
	5%
	\or
	5%
	\or
	7%
	\or
	5%
	\or
	7%
	\or
	5%
	\or
	7%
	\or
	5%
	\or
	5%
	\or
	7%
	\or
	5%
	\or
	5%
	\fi
}
\newcommand*{\DTMlatinoNonaeNome}[1]{%
	\ifcase#1
	\or
Nonis ianuariis%
\or
Nonis februariis%
\or
Nonis martiis%
\or
Nonis aprilibus%
\or
Nonis maiis%
\or
Nonis iuniis%
\or
Nonis quintilibus%
\or
Nonis sextilibus%
\or
Nonis septembribus%
\or
Nonis octobribus%
\or
Nonis nouembribus%
\or
Nonis decembribus%
	\fi
}
\newcommand*{\DTMlatinoPridieNonae}[1]{%
	\ifcase#1
	\or
	4%
	\or
	4%
	\or
	6%
	\or
	4%
	\or
	6%
	\or
	4%
	\or
	6%
	\or
	4%
	\or
	4%
	\or
	6%
	\or
	4%
	\or
	4%
	\fi
}
\newcommand*{\DTMlatinoPridieNonaeNome}[1]{%
	\ifcase#1
	\or
Nonas ianuarias%
\or
Nonas februarias%
\or
Nonas martias%
\or
Nonas apriles%
\or
Nonas maias%
\or
Nonas iunias%
\or
Nonas quintiles%
\or
Nonas sextiles%
\or
Nonas septembres%
\or
Nonas octobres%
\or
Nonas nouembres%
\or
Nonas decembres%
	\fi
}
\newcommand*{\DTMlatinoIdus}[1]{%
	\ifcase#1
	\or
	13%Ianuarius%
	\or
	13%Februarius%
	\or
	15%Martius%
	\or
	13%Aprilis%
	\or
	15%Maius%
	\or
	13%Iunius%
	\or
	15%Iulius%
	\or
	13%Augustus%
	\or
	13%Septemper%
	\or
	15%October%
	\or
	13%November%
	\or
	13%December%
	\fi
}
\newcommand*{\DTMlatinoIdusNome}[1]{%
	\ifcase#1
	\or
Idibus ianuariis%
\or
Idibus februariis%
\or
Idibus martiis%
\or
Idibus aprilibus%
\or
Idibus maiis%
\or
Idibus iuniis%
\or
Idibus quintilibus%
\or
Idibus sextilibus%
\or
Idibus septembribus%
\or
Idibus octobribus%
\or
Idibus nouembribus%
\or
Idibus decembribus%
	\fi
}

\newcommand*{\DTMlatinoPridieIdus}[1]{%
	\ifcase#1
	\or
	12%Ianuarius%
	\or
	12%Februarius%
	\or
	14%Martius%
	\or
	12%Aprilis%
	\or
	14%Maius%
	\or
	12%Iunius%
	\or
	14%Iulius%
	\or
	12%Augustus%
	\or
	12%Septemper%
	\or
	14%October%
	\or
	12%November%
	\or
	12%December%
	\fi
}
\newcommand*{\DTMlatinoPridieIdusNome}[1]{%
	\ifcase#1
\or
Idus ianuarias%
\or
Idus februarias%
\or
Idus martias%
\or
Idus apriles
\or 
Idus maias%
\or
Idus iunias%
\or
Idus quintiles%
\or
Idus sextiles%
\or
Idus septembres%
\or
Idus octobres%
\or
Idus nouembres%
\or
Idus decembres
	\fi
}
\newcommand*{\DTMlatinoPridieKalendasNome}[1]{%
	\ifcase#1
\or
Kalendas februarias%
\or
Kalendas martias%
\or
Kalendas apriles%
\or
Kalendas maias%
\or
Kalendas iunias%
\or
Kalendas quintiles%
\or
Kalendas sextiles%
\or
Kalendas septembres%
\or
Kalendas octobres
\or
Kalendas nouembres%
\or
Kalendas decembres%
\or
Kalendas ianuarias%
	\fi
}
\newcommand*{\DTMlatinoKalendis}[1]{%
	\ifcase#1
	\or
Kalendis ianuariis%
\or
Kalendis februariis
\or
Kalendis martiis%
\or
Kalendis aprilibus%
\or
Kalendis maiis%
\or
Kalendis iuniis%
\or
Kalendis quintilibus%
\or
Kalendis sextilibus%
\or
Kalendis septembribus%
\or
Kalendis octobribus%
\or
Kalendis nouembribus%
\or
Kalendis decembribus%
	\fi
}
\newcommand*{\DTMlatinoAnteDiem}[1]{%
	\ifcase#1
	\or
1%
\or
2%
\or
ante diem tertium%
\or
ante diem quartum%
\or
ante diem quintum%
\or
ante diem sextum%
\or
ante diem septimum%
\or
ante diem octavum%
\or
ante diem nonum%
\or
ante diem decimum%
\or
ante diem undecimum%
\or
ante diem duodecimum%
\or
ante diem tertium decimum%
\or
ante diem quartum decimum%
\or
ante diem quintum decimum%
\or
ante diem sextum decimum%
\or
ante diem septimum decimum%
\or
ante diem duodevicesimum%
\or
ante diem undevicesimum%
	\fi
}


\DTMnewdatestyle{latino-test}{%
\renewcommand*\DTMdisplaydate[4]{%
\ifnum##3=1\DTMlatinoKalendis{##2}\fi%kalenda
\ifnum##3=\DTMlatinoPridieNonae{##2}\DTMlatinoMensisPridie\DTMlatinoPridieNonaeNome{##2}\fi
\ifnum##3=\DTMlatinoNonae{##2}\DTMlatinoNonaeNome{##2}\fi
\ifnum##3=\DTMlatinoIdus{##2}\DTMlatinoIdusNome{##2}\fi
\ifnum##3=\DTMlatinoMensisDurata{##2}\DTMlatinoMensisPridie\DTMlatinoPridieKalendasNome{##2}\fi
\ifnum##3=\DTMlatinoPridieIdus{##2}\DTMlatinoMensisPridie\DTMlatinoPridieIdusNome{##2}\fi
\ifboolexpr{%
	test {\ifnumless{##3}{\DTMlatinoPridieNonae{##2}}}%
	and
	test{\ifnumgreater{##3}{1}}
}{\DTMlatinoAnteDiem{\number\numexpr(\number\DTMlatinoNonae{##2}-\number##3+1)\relax}\space\DTMlatinoPridieNonaeNome{##2}}{}%
\ifboolexpr{%
	test {\ifnumless{##3}{\DTMlatinoPridieIdus{##2}}}%
	and
	test{\ifnumgreater{##3}{\DTMlatinoNonae{##2}}}
}{\DTMlatinoAnteDiem{\number\numexpr(\number\DTMlatinoIdus{##2}-\number##3+1)\relax}\space\DTMlatinoPridieIdusNome{##2}}{}%
\ifboolexpr{%
	test {\ifnumless{##3}{\DTMlatinoMensisDurata{##2}}}%
	and
	test{\ifnumgreater{##3}{\DTMlatinoIdus{##2}}}
}{\DTMlatinoAnteDiem{\number\numexpr(\number\DTMlatinoMensisDurata{##2}-\number##3+2)\relax}\space\DTMlatinoPridieKalendasNome{##2}}{}%
}%
}%

